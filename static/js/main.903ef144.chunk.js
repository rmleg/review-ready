(this["webpackJsonpreview-ready"]=this["webpackJsonpreview-ready"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/review-ready-logo.17e0464f.png"},18:function(e,t,a){e.exports=a(43)},23:function(e,t,a){},27:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),c=a(8),r=a.n(c),o=(a(23),a(3)),i=a.n(o),s=a(9),d=a(10),m=a(11),u=a(16),h=a(12),f=a(17),p=a(44),k=function(e){return n.a.createElement("div",{className:"row p-5"},n.a.createElement("div",{className:"col-md-6 col-12"},n.a.createElement("h1",null,"Welcome to Review Ready"),n.a.createElement("p",{className:"h3"},"Upload a CSV to Begin")),n.a.createElement("div",{className:"col-md-6 col-12"},n.a.createElement("form",{onSubmit:e.onClickHandler},n.a.createElement("div",{className:"form-group mt-3"},n.a.createElement("label",{htmlFor:"input",className:"sr-only"},"Upload CSV"),e.error?n.a.createElement("div",null,n.a.createElement("span",{className:"alert-danger"},"Please upload a valid CSV file.")):null,n.a.createElement("input",{type:"file",id:"input",className:"form-control-file"}),n.a.createElement(p.a,{className:"mt-3",color:"info",type:"submit"},"Upload")))))},E=(a(27),a(14)),v=a.n(E),C=function(){return n.a.createElement("div",{id:"wrapper-navbar"},n.a.createElement("div",{id:"site-branding",className:"row align-items-center bg-primary px-5"},n.a.createElement("div",{id:"site-logo",className:"col-md-4 pt-3 pb-4"},n.a.createElement("img",{src:v.a,className:"img-fluid",alt:"Review Ready",scale:"0"}))))},g=function(){var e=(new Date).getFullYear();return n.a.createElement("footer",{className:"row p-5"},n.a.createElement("p",null,"\xa9 ",e," The Regents of the University of Michigan"))},w=a(5),b=a.n(w),S=function(e){return n.a.createElement("tr",null,n.a.createElement("td",{key:"header-".concat(e.id)},n.a.createElement("input",{type:"checkbox",className:"selector-checkbox",id:"header-".concat(e.id),onClick:function(){return e.clickColumnHandler(e.id)}})," ",n.a.createElement("label",{htmlFor:"header-".concat(e.id)},e.header)),n.a.createElement("td",{key:"sample-".concat(e.id)},e.data))},y=function(e){var t=[];if(e.headers.length===e.data.length)for(var a=0;a<e.headers.length;a++){var l={};l[e.headers[a]]=e.data[a],t.push(l)}return t.map((function(t,a){var l=Object.keys(t)[0];return n.a.createElement(S,{header:l,data:t[l],id:a,clickColumnHandler:e.clickColumnHandler})}))},N=function(e){return n.a.createElement("div",{className:"mb-3 col-12 ml-n3"},n.a.createElement(p.a,{color:"info",onClick:e.handleBackClick},"\u2190 Upload a Different File"))},A=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement(N,{handleBackClick:e.handleBackClick}),n.a.createElement("h3",{className:"mb-3 col-md-12"},"Select columns from '",e.name,"' to include in export"),n.a.createElement("div",{className:"mb-3 ml-3 download"},n.a.createElement(p.a,{color:"info",onClick:e.clickExportHandler},"\u2193 Download CSV with selections")),n.a.createElement("div",{className:"col-md-12 mb-3"},n.a.createElement(p.a,{color:"info",onClick:e.clickSelectAllHandler},e.selectAll?"Unselect All":"Select All")),n.a.createElement("table",{className:"table table-striped"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"Column"),n.a.createElement("th",{scope:"col"},"First Row of Data"))),n.a.createElement("tbody",null,n.a.createElement(y,{headers:e.headers,data:e.data,clickColumnHandler:e.clickColumnHandler}))))},H=a(2),x=a(15),D=function(e){return n.a.createElement("div",{className:"col-md-6 mx-auto text-center"},n.a.createElement(p.a,{className:"m-3",color:"info",onClick:function(){return e.onClick("columns")}},"Edit Columns"),n.a.createElement(p.a,{className:"m-3",onClick:function(){return e.onDocsClick(e.firstCandidateData)}},"Download Candidate Documents (with all columns)"))},F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).createDoc=function(e){var t=new H.Document;console.log(e);var l=[];e.forEach((function(e,t){console.log("adding for ".concat(e," at ").concat(t));var n=new H.Paragraph({children:[new H.TextRun({text:"".concat(a.state.headers[t]),bold:!0})]});l.push(n),n=new H.Paragraph({children:[new H.TextRun({text:"".concat(e)})],spacing:{after:240}}),l.push(n)})),t.addSection({properties:{},children:l}),H.Packer.toBlob(t).then((function(e){console.log(e),Object(x.saveAs)(e,"example.docx"),console.log("Document created successfully")}))},a.handleBackClick=function(){console.log("clicked"),a.setState({loaded:!1,uploadedFile:!1})},a.checkAll=function(){for(var e=document.querySelectorAll(".selector-checkbox"),t=0;t<e.length;t++)e[t].checked=!0},a.clickColumnHandler=function(e){var t=new Set(a.state.selectedColumns);t.has(e)?t.delete(e):t.add(e),a.setState({selectedColumns:t})},a.downloadFile=function(e,t){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},a.sorter=function(e,t){return e<t?-1:e>t?1:0},a.updateJSON=function(){var e=Array.from(a.state.selectedColumns).sort(a.sorter);console.log(e);var t=[];a.state.data.forEach((function(a){for(var l=[],n=0;n<e.length;n++){var c=e[n];l.push(a[c])}t.push(l)}));var l=b.a.unparse(t),n="Review_Ready_".concat(a.state.uploadedFile.name);a.downloadFile(n,l)},a.changeSelectedTitles=function(e){a.setState({selectedTitles:e})},a.dataHandler=function(e){e.preventDefault(),a.onClickHandler().then((function(e){e&&"text/csv"===e.type?(a.setState({uploadedFile:e,error:!1}),a.csvToJSON()):a.setState({error:!0})}))},a.onClickHandler=Object(s.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("input").files[0],e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)}))),a.csvToJSON=function(){var e={complete:function(e){a.setState({headers:e.data[0]});var t=[];e.data.forEach((function(e){t.push(e)})),a.setState({data:t,loaded:!0})},header:!1};b.a.parse(a.state.uploadedFile,e)},a.choicesClick=function(e){a.setState({choiceMade:e})},a.clickSelectAllHandler=function(){var e=new Set;if(a.state.selectAll)a.setState({selectAll:!1}),e.clear(),a.unCheckAll();else{for(var t=0;t<a.state.headers.length;t++)e.add(t);a.setState({selectAll:!0}),a.checkAll()}a.setState({selectedColumns:e})},a.unCheckAll=function(){for(var e=document.querySelectorAll(".selector-checkbox"),t=0;t<e.length;t++)e[t].checked=!1},a.state={selectAll:!1,selectedTitles:!1,data:!1,headers:!1,loaded:!1,uploadedFile:!1,error:!1,selectedColumns:new Set,choiceMade:!1},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App container-fluid"},n.a.createElement(C,null),this.state.loaded?n.a.createElement(D,{onClick:this.choicesClick,onDocsClick:this.createDoc,firstCandidateData:this.state.data[1]}):n.a.createElement(k,{onClickHandler:this.dataHandler,fileUploadHandler:this.fileUploadHandler,error:this.state.error}),n.a.createElement("div",{className:"row p-5"},this.state.loaded&&"columns"===this.state.choiceMade?n.a.createElement(n.a.Fragment,null,n.a.createElement(A,{name:this.state.uploadedFile.name,headers:this.state.headers,data:this.state.data[1],handleBackClick:this.handleBackClick,clickColumnHandler:this.clickColumnHandler,clickExportHandler:this.updateJSON,clickSelectAllHandler:this.clickSelectAllHandler,selectAll:this.state.selectAll})):null),n.a.createElement(g,null))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.903ef144.chunk.js.map